<template>
  <div>
    <h1>局部eventBus</h1>
     <div class="container">
            <div class="front">
                <div class="increment">
                    <child1 />
                </div>
                <div class="show-front"> {{fontCount}} </div>
                <div class="decrement">
                    <child2 />
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
         <el-button @click="$router.push({name:'demo15-1'})">跳转子页面</el-button>
    <router-view />
  </div>
</template>
<script>
import child1 from "./components/child1"
import child2 from "./components/child2"
// EventBus 又称为事件总线。在Vue中可以使用 EventBus 来作为沟通桥梁的概念，
// 就像是所有组件共用相同的事件中心，可以向该中心注册发送事件或接收事件，
// 所以组件都可以上下平行地通知其他组件，但也就是太方便所以若使用不慎，
// 就会造成难以维护的灾难，因此才需要更完善的Vuex作为状态管理中心，将通知的概念上升到共享状态层次。
import {EventBus} from './eventBus'
export default {
  components: {
    child1,
    child2
  },
  data() {
    return {
      fontCount: 0
    }
  },
  mounted() {
    // $once 仅监听一次
    EventBus.$on("incremented", ({ num, deg }) => {
      console.log('我是主页面')
      this.fontCount += num
    })
    EventBus.$on("decreased", ({ num, deg }) => {
      this.fontCount -= num
    })
  },
  methods: {}
}
</script>
